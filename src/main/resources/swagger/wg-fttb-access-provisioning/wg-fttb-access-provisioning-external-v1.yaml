---
swagger: "2.0"
info:
  description: "## WG FTTB access provisioning API"
  version: "1.0.0"
  title: "WG FTTB access provisioning"
host: "localhost:8092"
tags:
  - name: "FttbDeprovisioningExternalController"
  - name: "FttbProvisioningExternalController"
  - name: "callbackExternal"
schemes:
  - "http"
paths:
  /resource-order-resource-inventory/v1/fttbDeprovisioning/device:
    post:
      tags:
        - "FttbDeprovisioningExternalController"
      summary: "Device deprovisioning process"
      description: "Starts FTTB WG access provisioning process for device"
      operationId: "startDeviceDeprovisioning"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Url"
          in: "header"
          description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
          required: true
          type: "string"
        - name: "X-Callback-Id"
          in: "header"
          description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
          required: false
          type: "string"
        - name: "X-Callback-Error-Url"
          in: "header"
          description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
          required: false
          type: "string"
        - name: "X-Callback-Method"
          in: "header"
          description: "Default method if not specified is POST."
          required: false
          type: "string"
        - name: "endSZ"
          in: "query"
          description: "endSZ"
          required: true
          type: "string"
          pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
      responses:
        202:
          description: "Process started"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
        - apmToken: []
      x-async-responses:
        callback: "callbackFttbDeprovisioning"
  /resource-order-resource-inventory/v1/fttbDeprovisioning/port:
    post:
      tags:
        - "FttbDeprovisioningExternalController"
      summary: "Port deprovisioning process"
      description: "Starts FTTB WG access deprovisioning process for port"
      operationId: "startPortDeprovisioning"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Url"
          in: "header"
          description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
          required: true
          type: "string"
        - name: "X-Callback-Id"
          in: "header"
          description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
          required: false
          type: "string"
        - name: "X-Callback-Error-Url"
          in: "header"
          description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
          required: false
          type: "string"
        - name: "X-Callback-Method"
          in: "header"
          description: "Default method if not specified is POST."
          required: false
          type: "string"
        - name: "endSZ"
          in: "query"
          description: "endSZ"
          required: true
          type: "string"
          pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
        - name: "port"
          in: "query"
          description: "port"
          required: true
          type: "string"
      responses:
        202:
          description: "Process started"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
        - apmToken: []
      x-async-responses:
        callback: "callbackFttbDeprovisioning"
  /resource-order-resource-inventory/v1/fttbProvisioning/device:
    post:
      tags:
        - "FttbProvisioningExternalController"
      summary: "Device provisioning process"
      description: "Starts FTTB WG access provisioning process for device"
      operationId: "startDeviceProvisioning"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Url"
          in: "header"
          description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
          required: true
          type: "string"
        - name: "X-Callback-Id"
          in: "header"
          description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
          required: false
          type: "string"
        - name: "X-Callback-Error-Url"
          in: "header"
          description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
          required: false
          type: "string"
        - name: "X-Callback-Method"
          in: "header"
          description: "Default method if not specified is POST."
          required: false
          type: "string"
        - name: "endSZ"
          in: "query"
          description: "endSZ"
          required: true
          type: "string"
          pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
      responses:
        202:
          description: "Process started"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        404:
          description: "Not found"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
        - apmToken: []
      x-async-responses:
        callback: "callbackFttbProvisioning"
  /resource-order-resource-inventory/v1/fttbProvisioning/port:
    post:
      tags:
        - "FttbProvisioningExternalController"
      summary: "Port provisioning process"
      description: "Starts FTTB WG access provisioning process for port"
      operationId: "startPortProvisioning"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Url"
          in: "header"
          description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
          required: true
          type: "string"
        - name: "X-Callback-Id"
          in: "header"
          description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
          required: false
          type: "string"
        - name: "X-Callback-Error-Url"
          in: "header"
          description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
          required: false
          type: "string"
        - name: "X-Callback-Method"
          in: "header"
          description: "Default method if not specified is POST."
          required: false
          type: "string"
        - name: "endSZ"
          in: "query"
          description: "endSZ"
          required: true
          type: "string"
          pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
        - name: "port"
          in: "query"
          description: "port"
          required: true
          type: "string"
      responses:
        202:
          description: "Process started"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
        - apmToken: []
      x-async-responses:
        callback: "callbackFttbProvisioning"
  /callback/wgFttbAccessProvisioning/v1/deprovisioning:
    post:
      tags:
        - "callbackExternal"
      summary: "Callback about FTTB deprovisioning result"
      description: "Sends to a consumer a notification with result of FTTB deprovisioning."
      operationId: "callbackFttbDeprovisioning"
      consumes:
        - "application/json"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - in: "body"
          name: "body"
          description: "Operation result notification"
          required: true
          schema:
            $ref: "#/definitions/AsyncResponseNotification"
      responses:
        200:
          description: "FTTB deprovisioning request is processed"
        400:
          description: "Bad Request (Sync Response on POST Request)"
      x-async-responses:
        reference-operation-id: "startPortDeprovisioning"
  /callback/wgFttbAccessProvisioning/v1/error:
    post:
      tags:
        - "callbackExternal"
      summary: "Endpoint to receive error from 3scale in case of technical failure"
      description: "Receives error from 3scale in case of technical failure. The endpoint\
        \ is used only for unexpected errors which could not be processed by the provider\
        \ itself. Like HTTP 404 Not Found, HTTP 503 Service Unavailable."
      operationId: "receiveError"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Request-Id"
          in: "header"
          description: "Unique consumerID from request."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Error-Id"
          in: "header"
          description: "UUID V4 generated error identifier."
          required: true
          type: "string"
          format: "uuid"
        - name: "X-Callback-Error-HTTP-Code"
          in: "header"
          description: "Http error code such as 404, 503."
          required: true
          type: "string"
        - in: "body"
          name: "body"
          required: false
          schema:
            type: "object"
      responses:
        202:
          description: "Your callback API implementation should return this HTTP status\
            \ code if the data was received successfully"
  /callback/wgFttbAccessProvisioning/v1/provisioning:
    post:
      tags:
        - "callbackExternal"
      summary: "Callback about FTTB provisioning result"
      description: "Sends to a consumer a notification with result of FTTB provisioning."
      operationId: "callbackFttbProvisioning"
      consumes:
        - "application/json"
      parameters:
        - name: "X-Callback-Correlation-Id"
          in: "header"
          description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
          required: true
          type: "string"
          format: "uuid"
        - in: "body"
          name: "body"
          description: "Operation result notification"
          required: true
          schema:
            $ref: "#/definitions/AsyncResponseNotification"
      responses:
        200:
          description: "FTTB provisioning request is processed"
        400:
          description: "Bad Request (Sync Response on POST Request)"
      x-async-responses:
        reference-operation-id: "startPortProvisioning"
securityDefinitions:
  apmToken:
    type: "apiKey"
    name: "apmToken"
    in: "header"
definitions:
  AsyncResponseNotification:
    type: "object"
    properties:
      error:
        description: "Result of fail operation."
        $ref: "#/definitions/CallbackError"
      response:
        description: "Result of successful operation."
        $ref: "#/definitions/Notification"
      success:
        type: "boolean"
    description: "AsyncResponseNotification"
  CallbackError:
    type: "object"
    properties:
      message:
        type: "string"
      status:
        type: "integer"
        format: "int32"
      code:
        type: "string"
  Notification:
    type: "object"
    properties:
      eventId:
        type: "string"
        description: "ID of event"
      endSz:
        type: "string"
        description: "DPU device endSz"
      port:
        type: "string"
        description: "DPU device port"
      operation:
        type: "string"
        description: "operation"
      operationState:
        type: "string"
        description: "operation state"
        enum:
          - "COMPLETED"
          - "FAILED"
    description: "Notification"
  ProblemDetails:
    type: "object"
    required:
      - "title"
      - "type"
    properties:
      type:
        type: "string"
        description: "type"
      title:
        type: "string"
        description: "title"
      status:
        type: "integer"
        format: "int32"
        description: "status"
      detail:
        type: "string"
        description: "detail"
      instance:
        type: "string"
        description: "instance"
      embedded:
        description: "embedded"
        $ref: "#/definitions/SpecificProblemDetails"
    description: "Error response of 4xx and 5xx http statuses."
  SpecificProblemDetails:
    type: "object"
    required:
      - "code"
      - "reason"
    properties:
      code:
        type: "string"
        description: "code"
      reason:
        type: "string"
        description: "reason"
      message:
        type: "string"
        description: "message"
      status:
        type: "integer"
        format: "int32"
        description: "status"
    description: "Specific problem details(including fehlerbuildnummer code)."