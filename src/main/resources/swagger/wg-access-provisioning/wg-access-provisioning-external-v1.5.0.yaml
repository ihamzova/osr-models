---
swagger: "2.0"
info:
  description: "## WG access provisioning API"
  version: "1.5.0"
  title: "WG access provisioning"
host: "localhost:8091"
tags:
- name: "DeprovisioningProcessExternal"
- name: "ProvisioningProcessExternal"
- name: "callbackExternal"
schemes:
- "http"
paths:
  /resource-order-resource-inventory/v1/deprovisioning/accessLine:
    post:
      tags:
      - "DeprovisioningProcessExternal"
      summary: "Access line deprovisioning process"
      description: "Starts WG access deprovisioning process for access line"
      operationId: "startAccessLineDeprovisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "Access line info"
        required: true
        schema:
          $ref: "#/definitions/AccessLineRequestDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackDeprovisioning"
  /resource-order-resource-inventory/v1/deprovisioning/cards:
    post:
      tags:
      - "DeprovisioningProcessExternal"
      summary: "Cards deprovisioning process"
      description: "Starts WG access deprovisioning process for list of cards"
      operationId: "startCardsDeprovisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "List of cards"
        required: true
        schema:
          type: "array"
          items:
            $ref: "#/definitions/CardRequestDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackDeprovisioning"
  /resource-order-resource-inventory/v1/deprovisioning/device:
    post:
      tags:
      - "DeprovisioningProcessExternal"
      summary: "Device deprovisioning process"
      description: "Starts WG access deprovisioning process for device"
      operationId: "startDeviceDeprovisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "OLT device info"
        required: true
        schema:
          $ref: "#/definitions/DeviceDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackDeprovisioning"
  /resource-order-resource-inventory/v1/deprovisioning/port:
    post:
      tags:
      - "DeprovisioningProcessExternal"
      summary: "Port deprovisioning process"
      description: "Starts WG access deprovisioning process for port"
      operationId: "startPortDeprovisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - name: "deprovisioningForDpu"
        in: "query"
        description: "Deprovisioning for DPU flag"
        required: false
        type: "boolean"
      - in: "body"
        name: "body"
        description: "Port info"
        required: true
        schema:
          $ref: "#/definitions/PortDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackDeprovisioning"
  /resource-order-resource-inventory/v1/provisioning/cards:
    post:
      tags:
      - "ProvisioningProcessExternal"
      summary: "Cards provisioning process"
      description: "Starts WG access provisioning process for slot"
      operationId: "startCardsProvisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "List of cards"
        required: true
        schema:
          type: "array"
          items:
            $ref: "#/definitions/CardRequestDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackProvisioning"
  /resource-order-resource-inventory/v1/provisioning/device:
    post:
      tags:
      - "ProvisioningProcessExternal"
      summary: "Device provisioning process"
      description: "Starts WG access provisioning process for device"
      operationId: "startDeviceProvisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "OLT device info"
        required: true
        schema:
          $ref: "#/definitions/DeviceDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackProvisioning"
  /resource-order-resource-inventory/v1/provisioning/lineProfiles:
    post:
      tags:
      - "ProvisioningProcessExternal"
      summary: "Update access line profiles"
      description: "Start update of access line profiles"
      operationId: "startUpdateLineProfiles"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - in: "body"
        name: "body"
        description: "Access line id"
        required: true
        schema:
          $ref: "#/definitions/AccessLineIdDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
  /resource-order-resource-inventory/v1/provisioning/port:
    post:
      tags:
      - "ProvisioningProcessExternal"
      summary: "Port provisioning process"
      description: "Starts WG access provisioning process for port"
      operationId: "startPortProvisioning"
      consumes:
      - "application/json"
      produces:
      - "application/json;charset=UTF-8"
      parameters:
      - name: "X-Callback-Id"
        in: "header"
        description: "Unique consumerID used to identify the request consumer within\
          \ FUSE and provide support for maintenance."
        required: false
        type: "string"
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: false
        type: "string"
        format: "uuid"
      - name: "X-Callback-Url"
        in: "header"
        description: "The provided Rest Interface from the consumer where the expected\
          \ callback is sent to."
        required: false
        type: "string"
      - name: "X-Callback-Error-Url"
        in: "header"
        description: "On 3Scale or provider errors FUSE will try to deliver an error\
          \ on Error Callback URL to the Consumer."
        required: false
        type: "string"
      - name: "X-Callback-Method"
        in: "header"
        description: "Default method if not specified is POST."
        required: false
        type: "string"
      - name: "businessKey"
        in: "query"
        description: "Process business key"
        required: false
        type: "string"
      - in: "body"
        name: "body"
        description: "Port info"
        required: true
        schema:
          $ref: "#/definitions/PortDto"
      responses:
        202:
          description: "Process started"
          schema:
            $ref: "#/definitions/ProcessDto"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
        500:
          description: "Can't perform operation"
          schema:
            $ref: "#/definitions/ProblemDetails"
      security:
      - apmToken: []
      x-async-responses:
        callback: "callbackProvisioning"
  /callback/wgAccessProvisioning/v1/deprovisioning:
    post:
      tags:
      - "callbackExternal"
      summary: "WG access deprovisioning callback"
      description: "Sends to a consumer a notification with result of WG access deprovisioning."
      operationId: "callbackDeprovisioning"
      consumes:
      - "application/json"
      parameters:
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: true
        type: "string"
        format: "uuid"
      - in: "body"
        name: "body"
        description: "ONT Creation Result"
        required: true
        schema:
          $ref: "#/definitions/DeprovisioningResponseHolder"
      responses:
        200:
          description: "WG access deprovisioning  is processed"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
      x-async-responses:
        reference-operation-id: "startAccessLineDeprovisioning"
  /callback/wgAccessProvisioning/v1/deprovisioning/error:
    post:
      tags:
      - "callbackExternal"
      summary: "Endpoint to receive error from 3scale in case of technical failure"
      description: "Receives error from 3scale in case of technical failure. The endpoint\
        \ is used only for unexpected errors which could not be processed by the provider\
        \ itself. Like HTTP 404 Not Found, HTTP 503 Service Unavailable."
      operationId: "receiveDeprovisioningError"
      parameters:
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Request-Id"
        in: "header"
        description: "Unique consumerID from request."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Error-Id"
        in: "header"
        description: "UUID V4 generated error identifier."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Error-HTTP-Code"
        in: "header"
        description: "Http error code such as 404, 503."
        required: true
        type: "string"
      - in: "body"
        name: "body"
        required: false
        schema:
          type: "object"
      responses:
        202:
          description: "Your callback API implementation should return this HTTP status\
            \ code if the data was received successfully"
  /callback/wgAccessProvisioning/v1/provisioning:
    post:
      tags:
      - "callbackExternal"
      summary: "WG access provisioning callback"
      description: "Sends to a consumer a notification with result of WG access provisioning."
      operationId: "callbackProvisioning"
      consumes:
      - "application/json"
      parameters:
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: true
        type: "string"
        format: "uuid"
      - in: "body"
        name: "body"
        description: "Provisioning response holder"
        required: true
        schema:
          $ref: "#/definitions/ProvisioningResponseHolder"
      responses:
        200:
          description: "WG access provisioning is processed"
        400:
          description: "Bad request"
          schema:
            $ref: "#/definitions/ProblemDetails"
      x-async-responses:
        reference-operation-id: "startPortProvisioning"
  /callback/wgAccessProvisioning/v1/provisioning/error:
    post:
      tags:
      - "callbackExternal"
      summary: "Endpoint to receive error from 3scale in case of technical failure"
      description: "Receives error from 3scale in case of technical failure. The endpoint\
        \ is used only for unexpected errors which could not be processed by the provider\
        \ itself. Like HTTP 404 Not Found, HTTP 503 Service Unavailable."
      operationId: "receiveProvisioningError"
      parameters:
      - name: "X-Callback-Correlation-Id"
        in: "header"
        description: "UUID V4 generated identifier. Needs to be unique for each request\
          \ overall all systems. With this the callback URL is identified internally.\
          \ If not provided in request it will be generated by the integration layer\
          \ and will be returned in response. The asynchronous callback will provide\
          \ this ID for correlation of request and callback."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Request-Id"
        in: "header"
        description: "Unique consumerID from request."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Error-Id"
        in: "header"
        description: "UUID V4 generated error identifier."
        required: true
        type: "string"
        format: "uuid"
      - name: "X-Callback-Error-HTTP-Code"
        in: "header"
        description: "Http error code such as 404, 503."
        required: true
        type: "string"
      - in: "body"
        name: "body"
        required: false
        schema:
          type: "object"
      responses:
        202:
          description: "Your callback API implementation should return this HTTP status\
            \ code if the data was received successfully"
securityDefinitions:
  apmToken:
    type: "apiKey"
    name: "apmToken"
    in: "header"
definitions:
  AccessLineIdDto:
    type: "object"
    required:
    - "lineId"
    properties:
      lineId:
        type: "string"
        pattern: "[A-Z0-9]{3}\\.[A-Z0-9]{1,6}\\.[A-Z0-9]{1,10}"
  AccessLineRequestDto:
    type: "object"
    properties:
      endSz:
        type: "string"
        pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
      slotNumber:
        type: "string"
      portNumber:
        type: "string"
      lineId:
        type: "string"
        pattern: "[A-Z0-9]{3}\\.[A-Z0-9]{1,6}\\.[A-Z0-9]{1,10}"
  CallbackError:
    type: "object"
    properties:
      message:
        type: "string"
      status:
        type: "integer"
        format: "int32"
      code:
        type: "string"
  CardRequestDto:
    type: "object"
    properties:
      endSz:
        type: "string"
        pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
      slotNumber:
        type: "string"
  DeprovisioningResponseHolder:
    type: "object"
    properties:
      error:
        description: "Result of fail operation."
        $ref: "#/definitions/CallbackError"
      response:
        type: "object"
        description: "Result of successful operation."
      success:
        type: "boolean"
    description: "Deprovisioning response"
  DeviceDto:
    type: "object"
    properties:
      endSz:
        type: "string"
        pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
  PortDto:
    type: "object"
    properties:
      endSz:
        type: "string"
        pattern: "[0-9]{1,6}\\/[0-9]{1,6}\\/[0-9]{1,6}\\/[a-zA-Z0-9]{2,4}"
      slotNumber:
        type: "string"
        minLength: 0
        maxLength: 50
      portNumber:
        type: "string"
        minLength: 0
        maxLength: 50
      portType:
        type: "string"
  ProblemDetails:
    type: "object"
    required:
    - "title"
    - "type"
    properties:
      type:
        type: "string"
        description: "type"
      title:
        type: "string"
        description: "title"
      status:
        type: "integer"
        format: "int32"
        description: "status"
      detail:
        type: "string"
        description: "detail"
      instance:
        type: "string"
        description: "instance"
      embedded:
        description: "embedded"
        $ref: "#/definitions/SpecificProblemDetails"
    description: "Error response of 4xx and 5xx http statuses."
  ProcessDto:
    type: "object"
    properties:
      source:
        type: "string"
      id:
        type: "string"
        format: "uuid"
      businessKey:
        type: "string"
      index:
        type: "integer"
        format: "int32"
  ProvisioningResponseHolder:
    type: "object"
    properties:
      error:
        description: "Result of fail operation."
        $ref: "#/definitions/CallbackError"
      response:
        type: "object"
        description: "Result of successful operation."
      success:
        type: "boolean"
    description: "Provisioning response"
  SpecificProblemDetails:
    type: "object"
    required:
    - "code"
    - "reason"
    properties:
      code:
        type: "string"
        description: "code"
      reason:
        type: "string"
        description: "reason"
      message:
        type: "string"
        description: "message"
      status:
        type: "integer"
        format: "int32"
        description: "status"
    description: "Specific problem details(including fehlerbuildnummer code)."
